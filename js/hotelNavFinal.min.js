document.querySelectorAll(".dropdown-menu:last-child")[1].addEventListener("click",e=>{e.stopPropagation()}),document.getElementById("hotel").placeholder="Destination, resort or hotel",document.querySelector('[role="button"]').textContent="7 Nights",document.getElementById("room").textContent="1 Room & 2 Guests";const checkin=document.getElementById("checkin");let nodoNuevo;checkin.value=(new Date).toISOString().slice(0,10),checkin.min=(new Date).toISOString().slice(0,10);const popularNights=["4","7","10","14"],maxNight=14;let miNodo=document.getElementsByClassName("dropdown-menu")[0];function fillDropdown(e){(nodoNuevo=generarElemento("a",e+" Nights","",["dropdown-item"])).setAttribute("href","#"),miNodo.appendChild(nodoNuevo),nodoNuevo.addEventListener("click",actualizarNoche)}nodoNuevo=generarElemento("p","POPULAR DURATIONS","",["dropdown-item","disabled"]),miNodo.appendChild(nodoNuevo),popularNights.map(e=>fillDropdown(e)),miNodo.appendChild(generarElemento("div","","",["dropdown-divider"])),miNodo.appendChild(generarElemento("p","DAILY","",["dropdown-item","disabled"])),nodoNuevo.setAttribute("href","#");for(let e=1;e<=14;e++)(nodoNuevo=generarElemento("a",e+" Nights","",["dropdown-item"])).setAttribute("href","#"),miNodo.appendChild(nodoNuevo),nodoNuevo.addEventListener("click",actualizarNoche);function actualizarNoche(){document.querySelector('[role="button"]').textContent=this.textContent}const prefAdult=2,maxAdults=5,maxChilds=5,maxChildAge=17;miNodo=document.getElementsByTagName("select")[0];for(let e=1;e<=5;e++)(nodoNuevo=generarElemento("option",e)).setAttribute("value",e),miNodo.appendChild(nodoNuevo);miNodo.getElementsByTagName("option")[1].setAttribute("selected","selected"),miNodo=document.getElementsByTagName("select")[1];for(let e=0;e<maxChilds;e++)(nodoNuevo=generarElemento("option",e)).setAttribute("value",e),miNodo.appendChild(nodoNuevo);function actDropEdad(e){const o=(miNodo=document.getElementsByClassName("roomCard")[e]).querySelectorAll(".ageRow select").length;let t=miNodo.getElementsByTagName("select")[1].selectedOptions[0].value-o;if(t<0){t=Math.abs(t);for(let e=0;e<t;e++)miNodo.querySelector(".ageRow:last-child").removeChild(miNodo.querySelectorAll(".ageRow select")[miNodo.querySelectorAll(".ageRow select").length-1]),0===miNodo.querySelector(".ageRow:last-child").childNodes.length&&miNodo.removeChild(miNodo.querySelector(".ageRow:last-child"));null==miNodo.querySelector(".ageRow")&&miNodo.removeChild(miNodo.querySelector(".infoChild"))}else{null==miNodo.querySelector(".ageRow")&&miNodo.appendChild(generarElemento("div","CHILD AGES (AGE ON DATE OF RETURN)","",["infoChild"]));const e=generarElemento("select");e.appendChild(generarElemento("option","Age")),e.firstChild.setAttribute("selected","selected"),e.firstChild.setAttribute("disabled","disabled");for(let o=1;o<=maxChildAge;o++)(nodoNuevo=generarElemento("option",o)).setAttribute("value",o),e.appendChild(nodoNuevo);for(let l=o;l<o+t;l++)l%2==0&&miNodo.appendChild(generarElemento("div","","",["ageRow"])),miNodo.querySelector("div:last-child").appendChild(e.cloneNode(!0))}}function addRoom(){const e=document.querySelectorAll(".roomCard:not(:last-child)").length;if(e<4){for(null!=(miNodo=document.querySelector(".roomCard").cloneNode(!0)).getElementsByClassName("infoChild")[0]&&miNodo.removeChild(miNodo.getElementsByClassName("infoChild")[0]);0!==miNodo.getElementsByClassName("ageRow").length;)miNodo.removeChild(miNodo.getElementsByClassName("ageRow")[0]);miNodo.getElementsByTagName("select")[1].addEventListener("change",()=>{actDropEdad(e)}),document.querySelector(".roomsContainer").insertBefore(miNodo,document.getElementsByClassName("roomsContainer")[0].lastChild.previousSibling),(miNodo=generarElemento("div","x","",["close"])).addEventListener("click",closeRoom),document.querySelector(".roomCard:last-child").previousSibling.appendChild(miNodo),document.querySelector(".roomCard:last-child").previousSibling.querySelector("div:first-child span").textContent=document.querySelectorAll(".roomCard:not(:last-child)").length,document.getElementsByClassName("dropdown-toggle")[1].click(),document.getElementsByClassName("dropdown-toggle")[1].click()}}function closeRoom(){let e;(miNodo=event.target.parentElement).parentElement.removeChild(miNodo);let o=0;miNodo=document.querySelectorAll(".roomCard:not(:last-child)");for(let t=0;t<miNodo.length;t++){e=miNodo[t].getElementsByTagName("select")[1].selectedIndex,miNodo[t].children[0].getElementsByTagName("span")[0].textContent=o+1;const l=o;miNodo[t].querySelector("div:nth-child(3)").removeChild(miNodo[t].getElementsByTagName("select")[1]),miNodo[t].querySelector("div:nth-child(3)").appendChild(generarElemento("select")),nodoNuevo=miNodo[t].getElementsByTagName("select")[1];for(let e=0;e<maxChilds;e++){const o=generarElemento("option",e);nodoNuevo.setAttribute("value",e),nodoNuevo.appendChild(o)}nodoNuevo.selectedIndex=e,nodoNuevo.addEventListener("change",()=>{actDropEdad(l)}),o++}document.getElementsByClassName("dropdown-toggle")[1].click(),document.getElementsByClassName("dropdown-toggle")[1].click()}function actRoomsGuests(){document.getElementById("room").textContent=document.getElementsByClassName("roomCard").length-1+" Room/s & "+Array.prototype.map.call(document.querySelectorAll(".roomCard:not(:last-child) div:nth-child(2) select,.roomCard:not(:last-child) div:nth-child(3) select"),e=>parseInt(e.selectedOptions[0].value)).filter(e=>0!==e).reduce((e,o)=>e+o)+" Guest/s",document.getElementsByClassName("dropdown-toggle")[1].click()}function buscar(){""!==document.getElementById("hotel").value?console.log(document.getElementById("hotel").value):console.log("hotel no seleccionado"),console.log(document.getElementById("checkin").value),console.log(document.getElementById("nights").textContent);const e=Array.prototype.map.call(document.querySelectorAll(".roomCard:not(:last-child"),e=>e.querySelectorAll(" div:nth-child(2) > select, div:nth-child(3) > select")).map(e=>parseInt(e[0].selectedOptions[0].value)+parseInt(e[1].selectedOptions[0].value));for(let o=0;o<e.length;o++)console.log(`room ${o+1}, ${e[o]} guest/s`)}function generarElemento(e,o="",t="",l=""){const d=document.createElement(e);if(""!==o){const e=document.createTextNode(o);d.appendChild(e)}return""!==l&&l.forEach(e=>{d.classList.add(e)}),""!==t&&d.setAttribute("id",t),d}miNodo.addEventListener("change",()=>{actDropEdad(0)}),document.querySelector(".roomCard:last-child>div:first-child").addEventListener("click",addRoom),document.querySelector(".roomCard:last-child>p").addEventListener("click",actRoomsGuests),document.querySelector('[type="button"]').addEventListener("click",buscar);